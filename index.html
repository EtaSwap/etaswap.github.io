<!doctype html>
<html lang="en">
<head>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#7cb09e">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=yes, initial-scale=1.0, maximum-scale=5.0, minimum-scale=1.0">
    <meta name="description"
          content="First DEX aggregator on Hedera. Find best rate among SaucerSwap, Pangolin and Heliswap. Seamless swaps, infinite possibilities."/>
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta property="og:title" content="EtaSwap"/>
    <meta property="og:description"
          content="First DEX aggregator on Hedera. Find best rate among SaucerSwap, Pangolin and Heliswap. Seamless swaps, infinite possibilities."/>
    <meta property="og:image" content="https://etaswap.com/logo-og.png"/>
    <meta property="og:url" content="https://etaswap.com"/>
    <title>EtaSwap</title>
    <link rel="stylesheet" href="./normalize.css"/>
    <style>
        @-webkit-keyframes rotate-logo {
            92% {
                -webkit-transform: rotate(0deg);
                transform: rotate(0deg);
            }
            94% {
                -webkit-transform: rotate(20deg);
                transform: rotate(20deg);
            }
            96% {
                -webkit-transform: rotate(-20deg);
                transform: rotate(-20deg);
            }
            98% {
                -webkit-transform: rotate(10deg);
                transform: rotate(10deg);
            }
            99% {
                -webkit-transform: rotate(-7deg);
                transform: rotate(-7deg);
            }
            100% {
                -webkit-transform: rotate(0deg);
                transform: rotate(0deg);
            }
        }

        @keyframes rotate-logo {
            92% {
                -webkit-transform: rotate(0deg);
                transform: rotate(0deg);
            }
            94% {
                -webkit-transform: rotate(20deg);
                transform: rotate(20deg);
            }
            96% {
                -webkit-transform: rotate(-20deg);
                transform: rotate(-20deg);
            }
            98% {
                -webkit-transform: rotate(10deg);
                transform: rotate(10deg);
            }
            99% {
                -webkit-transform: rotate(-7deg);
                transform: rotate(-7deg);
            }
            100% {
                -webkit-transform: rotate(0deg);
                transform: rotate(0deg);
            }
        }

        * {
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen",
            "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue",
            sans-serif;
            margin: 0;
            width: 100vw;
            max-width: 100%;
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            -webkit-box-orient: vertical;
            -webkit-box-direction: normal;
            -ms-flex-direction: column;
            flex-direction: column;
            -webkit-box-align: center;
            -ms-flex-align: center;
            align-items: center;
            -webkit-box-pack: center;
            -ms-flex-pack: center;
            justify-content: center;
            text-align: center;
            background: -o-linear-gradient(130deg, #E8FFCE 28%, #ACFADF 75%);
            background: linear-gradient(320deg, #E8FFCE 28%, #ACFADF 75%);
            position: relative;
            z-index: 1;
        }

        .main__screen {
            height: 100vh;
            max-height: 100dvh;
            position: relative;
            z-index: 3;
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            max-width: 1300px;
            padding: 0 20px;
            -webkit-box-align: center;
            -ms-flex-align: center;
            align-items: center;
        }

        .main__screen-descr {
            -webkit-box-flex: 1;
            -ms-flex: 1 1 0px;
            flex: 1 1 0px;
            text-align: left;
            padding: 20px;
        }

        .main__screen-banner-wrapper {
            -webkit-box-flex: 2;
            -ms-flex: 2 2 0px;
            flex: 2 2 0px;
            padding: 20px;
        }

        .main__screen-banner {
            width: 100%;
            display: block;
        }

        .logo {
            font-size: 120px;
            width: 120px;
            height: 120px;
            -webkit-animation-name: rotate-logo;
            animation-name: rotate-logo;
            -webkit-animation-duration: 10s;
            animation-duration: 10s;
            -webkit-animation-iteration-count: infinite;
            animation-iteration-count: infinite;
            -webkit-animation-timing-function: linear;
            animation-timing-function: linear;
        }

        .title {
            font-size: 3em;
            font-weight: 600;
        }

        .subtitle {
            font-size: 1.3em;
            font-weight: 400;
            margin: 10px 0;
            line-height: 1.5;
        }

        .launch {
            display: -webkit-inline-box;
            display: -ms-inline-flexbox;
            display: inline-flex;
            -webkit-box-pack: center;
            -ms-flex-pack: center;
            justify-content: center;
            -webkit-box-align: center;
            -ms-flex-align: center;
            align-items: center;
            background-color: #283660;
            padding: 16px 32px;
            font-size: 1.2em;
            border-radius: 12px;
            color: #E8FFCE;
            -webkit-transition: 0.3s;
            -o-transition: 0.3s;
            transition: 0.3s;
            margin-bottom: 30px;
            margin-top: 28px;
            border: 0;
            cursor: pointer;
            font-weight: 400;
            text-decoration: none;
        }

        .stats {
            position: relative;
            z-index: 3;
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            max-width: 1300px;
            padding: 0 50px 40px;
            -webkit-box-align: center;
            -ms-flex-align: center;
            align-items: center;
            -webkit-box-orient: vertical;
            -webkit-box-direction: normal;
            -ms-flex-direction: column;
            flex-direction: column;
            text-align: left;
            -ms-flex-wrap: wrap;
            flex-wrap: wrap;
            width: 100%;
        }

        .stats__title {
            font-size: 2.2em;
        }

        .stats__chart-wrapper {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-around;
            align-content: space-between;
            width: 100%;
        }

        .stats__chart-small {
            width: 100%;
            max-width: 300px;
            max-height: 450px;
        }

        .stats__chart-large {
            max-width: 800px;
            max-height: 450px;
            width: 100%;
        }

        .faq {
            position: relative;
            z-index: 3;
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            max-width: 1300px;
            padding: 0 50px;
            -webkit-box-align: center;
            -ms-flex-align: center;
            align-items: center;
            -webkit-box-orient: vertical;
            -webkit-box-direction: normal;
            -ms-flex-direction: column;
            flex-direction: column;
            text-align: left;
            -ms-flex-wrap: wrap;
            flex-wrap: wrap;
        }

        .faq__title {
            font-size: 2.2em;
        }

        .faq__item {
            -webkit-box-flex: 1;
            -ms-flex: 1 0 100%;
            flex: 1 0 100%;
            width: 100%;
            padding-bottom: 40px;
        }

        .faq__question {
            font-size: 1.5em;
            font-weight: bold;
            padding-bottom: 16px;
        }

        .faq__answer {
            font-style: italic;
            padding-left: 20px;
            font-size: 1.2em;
        }

        .howto {
            position: relative;
            z-index: 3;
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            max-width: 1300px;
            padding: 0 50px;
            -webkit-box-align: center;
            -ms-flex-align: center;
            align-items: center;
            -webkit-box-orient: vertical;
            -webkit-box-direction: normal;
            -ms-flex-direction: column;
            flex-direction: column;
            text-align: left;
        }

        .howto__title {
            font-size: 2.2em;
        }

        .howto__inner {
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            -webkit-box-align: center;
            -ms-flex-align: center;
            align-items: center;
            gap: 30px;
        }

        .howto__banner-wrapper {
            -webkit-box-flex: 3;
            -ms-flex: 3 3 0px;
            flex: 3 3 0px;
        }

        .howto__banner {
            width: 100%;
            max-width: 900px;
        }

        .howto__descr {
            font-size: 1.2em;
            -webkit-box-flex: 2;
            -ms-flex: 2 2 0px;
            flex: 2 2 0px;
        }

        .social {
            position: relative;
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            z-index: 2;
            padding: 40px;
        }

        .social__link {
            text-decoration: none;
            display: inline-block;
            margin: 0 4px;
        }

        .social__image {
            width: 40px;
            height: 40px;
            vertical-align: top;
        }

        .particles {
            position: absolute;
            z-index: 1;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
        }

        @media screen and (max-width: 992px) {
            .main__screen {
                -webkit-box-orient: vertical;
                -webkit-box-direction: normal;
                -ms-flex-direction: column;
                flex-direction: column;
                height: auto;
                max-height: none;
            }

            .main__screen-descr {
                text-align: center;
            }

            .launch {
                margin-bottom: 0;
            }

            .title {
                margin: 0.3em 0;
            }
        }


        @media screen and (max-width: 768px) {
            .main__screen-descr {
                padding-left: 0;
                padding-right: 0;
            }

            .main__screen-banner-wrapper {
                padding-left: 0;
                padding-right: 0;
            }

            .howto {
                padding: 0 20px;
            }

            .howto__inner {
                -webkit-box-orient: vertical;
                -webkit-box-direction: normal;
                -ms-flex-direction: column;
                flex-direction: column;
                gap: 0;
            }

            .stats {
                padding: 0 20px 20px;
            }

            .stats__chart-large {
                max-width: 800px;
                max-height: 350px;
                width: 100%;
            }

            .faq {
                padding: 0 20px;
            }
        }
    </style>
</head>
<body>
<div class="main__screen">
    <div class="main__screen-descr">
        <img class="logo" src="/logo.svg" alt="η" title="η">
        <h1 class="title">EtaSwap</h1>
        <h3 class="subtitle">First DEX aggregator on Hedera. <br/>Seamless Swaps, Infinite Possibilities.</h3>
        <a href="https://app.etaswap.com" class="launch">Launch app (beta)</a>
    </div>
    <div class="main__screen-banner-wrapper">
        <img class="main__screen-banner" src="devices.webp" alt="Etaswap on devices">
    </div>
</div>
<div class="howto" id="howto">
    <h2 class="howto__title">How it works</h2>
    <div class="howto__inner">
        <div class="howto__banner-wrapper">
            <img class="howto__banner" src="./aggregator.webp" alt="DEX aggregator">
        </div>
        <div class="howto__descr">
            <p>The purpose of DEX aggregator - is to check swap rates among all DEX-es and provide the best exchange
                rate for user.</p>
            <p>DEX aggregator guarantees freshest rate as it's working on smart-contract level directly, without any
                intermediate API.</p>
            <p>There are two main components of EtaSwap as DEX aggregator: first - price oracles, which allows us to
                find best rates and second - exchange contract with all DEX-es adapters.</p>
        </div>
    </div>
</div>
<div class="stats" id="stats">
    <h2 class="stats__title">Statistics</h2>
    <div class="stats__chart-wrapper">
        <canvas class="stats__chart-small" id="stats-pie"></canvas>
        <canvas class="stats__chart-large" id="stats-bar"></canvas>
    </div>
</div>
<div class="faq" id="faq">
    <h2 class="faq__title">FAQ</h2>
    <div class="faq__item">
        <div class="faq__question">Which exchanges do you support?</div>
        <div class="faq__answer">Currently we aggregate <a href="https://www.saucerswap.finance/" target="_blank">SaucerSwap (V1)</a>,
            <a href="https://www.pangolin.exchange/" target="_blank">Pangolin</a>, <a href="https://www.heliswap.io/"
                                                                                      target="_blank">HeliSwap</a>, and
            <a href="https://hsuite.finance/" target="_blank">HSuite</a> .
            But we are always open to add new exchanges if something appears in Hedera ecosystem. Feel free to contact us to
            add another DEX.
        </div>
    </div>
    <div class="faq__item">
        <div class="faq__question">What about SaucerSwap (V2)?</div>
        <div class="faq__answer">We are cooking, stay tuned!</div>
    </div>
    <div class="faq__item">
        <div class="faq__question">Do you provide liquidity?</div>
        <div class="faq__answer">No, DEX aggregator not supposed to work as DEX. It's just looking for a best prices
            among liquidity providers.
        </div>
    </div>
    <div class="faq__item">
        <div class="faq__question">How does economic part of application works, will I pay fee?</div>
        <div class="faq__answer">EtaSwap is taking pretty small fee (0.2% - 0.5%) per each transaction. More explanation
            about fees in
            <a href="https://docs.etaswap.com/fees-explanation">documentation</a>.
        </div>
    </div>
    <div class="faq__item">
        <div class="faq__question">Is EtaSwap open-source project?</div>
        <div class="faq__answer">Yes, EtaSwap fully transparent and open-source project. Source code of EtaSwap
            available
            on
            <a href="https://github.com/EtaSwap">Github</a>. We appreciate any kind of participation, feel free to open
            issues, ask questions or make pull requests.
        </div>
    </div>
    <div class="faq__item">
        <div class="faq__question">Do you plan to audit your smart contracts?</div>
        <div class="faq__answer">The application in Beta stage at the moment, also we are working on new killer features
            (such as splitting order among DEX-es), so it's not final version of smart contracts yet. As soon as we will
            be ready with final features and ready financially we will request smart-contract audit.
        </div>
    </div>
</div>
<div class="social" id="social">
    <a class="social__link" href="https://twitter.com/eta_swap" target="_blank" title="Twitter">
        <img class="social__image" src="./icon_twitter.svg" alt="Twitter">
    </a>
    <a class="social__link" href="https://t.me/etaswap" target="_blank" title="Telegram">
        <img class="social__image" src="./icon_telegram.svg" alt="Telegram">
    </a>
    <a class="social__link" href="https://www.reddit.com/r/etaswap/" target="_blank" title="Reddit">
        <img class="social__image" src="./icon_reddit.svg" alt="Reddit">
    </a>
    <a class="social__link" href="https://discord.gg/8uHPAT4Nhx" target="_blank" title="Discord">
        <img class="social__image" src="./icon_discord.svg" alt="Discord">
    </a>
    <a class="social__link" href="https://github.com/EtaSwap" target="_blank" title="GitHub">
        <img class="social__image" src="./icon_github.svg" alt="GitHub">
    </a>
</div>
<div id="particles-js" class="particles"></div>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-2K6S7V2RDN"></script>
<script>
    if (window?.location?.hostname !== 'localhost') {
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());

        gtag('config', 'G-2K6S7V2RDN');
    }
</script>
<script src="./particles.min.js"></script>
<script>
    particlesJS.load('particles-js', 'particlesjs-config.json', function () {
        console.log('callback - particles.js config loaded');
    });
</script>
<script src="./chart.js"></script>
<script>
    const exchangeSwapTopic = '0xbeee1e6e7fe307ddcf84b0a16137a4430ad5e2480fc4f4a8e250ab56ccd7630d';

    //Hash calculation: hex(keccak256('AdapterName'))
    const aggregators = {
        SaucerSwap: { hash: '0x80a607c5371b7579368939531261896136b90119d73a24d9f4bca4491e31ecfd', color: '#33BA2B', txAmount: 0 },
        Pangolin: { hash: '0xf6c1fd481c0d752ea9dfddb9d9be94f6578ec5eb86e6ac7a24a75d1553d37e47', color: '#FFC800', txAmount: 0 },
        HeliSwap: { hash: '0x331ff93de7a46ebb2afa4560b9aa185d21b43d744d18c4507423c7a4af2597b2', color: '#2f18e5', txAmount: 0 },
        HSuite: { hash: null, color: '#890bf8', txAmount: 0 },
    };
    const transactionsByDate = {};
    // Launch of EtaSwap
    let startDate = new Date('2023-09-01');
    const today = new Date();
    const getDateKey = (date) => date.getUTCFullYear().toString() + '-' + (date.getUTCMonth() + 1).toString().padStart(2, '0') + '-' + (date.getDate() + 1).toString().padStart(2, 0);
    while (startDate <= today) {
        transactionsByDate[getDateKey(startDate)] = {
            SaucerSwap: 0,
            Pangolin: 0,
            HeliSwap: 0,
            HSuite: 0,
        };
        startDate.setUTCDate(startDate.getUTCDate() + 1);
    }

    const pushTransactionByDate = (aggregatorId, timestamp) => {
        const dateKey = getDateKey(new Date(+(timestamp.split('.')[0] + '000')));
        if (transactionsByDate[dateKey]) {
            if (transactionsByDate[dateKey][aggregatorId]) {
                transactionsByDate[dateKey][aggregatorId] += 1;
            } else {
                transactionsByDate[dateKey][aggregatorId] = 1;
            }
        } else {
            transactionsByDate[dateKey] = { [aggregatorId]: 1 };
        }
    };
    Promise.all([
        fetch('https://mainnet-public.mirrornode.hedera.com/api/v1/contracts/0.0.3745835/results/logs?limit=2000'),
        fetch('https://mainnet-public.mirrornode.hedera.com/api/v1/transactions?account.id=0.0.3745833&limit=2000&transactionType=CRYPTOTRANSFER&type=credit&result=SUCCESS'),
    ]).then(async ([exchangeRes, feeRes]) => {
        let exchangeResJSON = await exchangeRes.json();
        let exchangeResArray = exchangeResJSON.logs;
        while(exchangeResJSON.links && exchangeResJSON.links.next) {
            const nextBatch = await fetch(`https://mainnet-public.mirrornode.hedera.com${exchangeResJSON.links.next}`);
            exchangeResJSON = await nextBatch.json();
            exchangeResArray = exchangeResArray.concat(exchangeResJSON.logs);
        }
        let feeResJSON = await feeRes.json();
        let feeResArray = feeResJSON.transactions;
        while(feeResJSON.links && feeResJSON.links.next) {
            const nextBatch = await fetch(`https://mainnet-public.mirrornode.hedera.com${feeResJSON.links.next}`);
            feeResJSON = await nextBatch.json();
            feeResArray = feeResArray.concat(feeResJSON.transactions);
        }
        const exchangeLogs = exchangeResArray.filter(log => log.topics[0] === exchangeSwapTopic);
        exchangeLogs.forEach(log => {
            switch (log.topics[1]) {
                case aggregators.SaucerSwap.hash:
                    aggregators.SaucerSwap.txAmount++;
                    pushTransactionByDate('SaucerSwap', log.timestamp);
                    break;
                case aggregators.Pangolin.hash:
                    aggregators.Pangolin.txAmount++;
                    pushTransactionByDate('Pangolin', log.timestamp);
                    break;
                case aggregators.HeliSwap.hash:
                    aggregators.HeliSwap.txAmount++;
                    pushTransactionByDate('HeliSwap', log.timestamp);
                    break;
                default:
                    break;
            }
        });
        for (let i = 0; i < feeResArray.length; i++) {
            if (
                feeResArray[i].transfers.find(transfer => transfer.account === '0.0.3745833' && transfer.amount > 0)
                && feeResArray[i].memo_base64
                && atob(feeResArray[i].memo_base64).startsWith('Hsuite Exchange')
            ) {
                aggregators.HSuite.txAmount++;
                pushTransactionByDate('HSuite', feeResArray[i].consensus_timestamp);
            }
        }

        const ctxPie = document.getElementById('stats-pie');
        const ctxBar = document.getElementById('stats-bar');
        new Chart(ctxPie, {
            type: 'doughnut',
            data: {
                labels: Object.keys(aggregators),
                datasets: [{
                    label: 'Transactions, using exchange',
                    data: Object.values(aggregators).map(aggregator => aggregator.txAmount),
                    backgroundColor: Object.values(aggregators).map(aggregator => aggregator.color),
                }],
            },
            options: {
                responsive: true,
                plugins: {
                    legend: { position: 'top' },
                    title: {
                        display: true,
                        text: 'Transactions amount made with EtaSwap',
                        font: {
                            family: '-apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif',
                            size: 18
                        }
                    }
                }
            },
        });

        const orderedTransactionsByDate = Object.keys(transactionsByDate).sort().reduce(
            (obj, key) => {
                obj[key] = transactionsByDate[key];
                return obj;
            },
            {}
        );

        new Chart(ctxBar, {
            type: 'bar',
            data: {
                labels: Object.keys(orderedTransactionsByDate),
                datasets: Object.keys(aggregators).map(aggregatorId => ({
                    label: aggregatorId,
                    data: Object.values(orderedTransactionsByDate).map(transactions => transactions[aggregatorId]),
                    backgroundColor: aggregators[aggregatorId].color,
                }))
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'top' },
                    title: {
                        display: true,
                        text: 'Transactions amount/time made with EtaSwap',
                        font: {
                            family: '-apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif',
                            size: 18
                        }
                    }
                },
                scales: {
                    x: { stacked: true, categoryPercentage: 1.0, barPercentage: 1.0 },
                    y: { stacked: true },
                }
            },
        });
    });
</script>
</body>
</html>

